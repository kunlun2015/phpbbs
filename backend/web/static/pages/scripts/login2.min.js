$(".login-form").validate({
    errorElement:"span",
    errorClass:"help-block",
    focusInvalid:!1,
    rules:{
        username:{
            required:!0
        },
        password:{
            required:!0
        }
    },
    messages:{
        username:{
            required:"用户名不能为空"
        },
        password:{
            required:"密码不能为空"
        }
    },
    invalidHandler:function(e,r){
        $(".alert-danger",$(".login-form")).show()
    },
    highlight:function(e){
        $(e).closest(".form-group").addClass("has-error")
    },
    unhighlight:function(e){
        $(e).closest(".form-group").removeClass("has-error")
    },
    success:function(e){
        e.closest(".form-group").removeClass("has-error"),
        e.remove()
    },
    errorPlacement:function(e,r){
        e.insertAfter(r.closest(".input-icon"))
    },
    submitHandler:function(e){  
        $.ajax({
            url: $("input[name=request_url]").val(),
            type: 'post',
            dataType: 'json',
            data: $('.login-form').serialize(),
            success: function(data){
                if(data.code == 0){
                    $('.return-msg span').text(data.msg);
                    $('.return-msg').css('display', 'block').addClass('alert-success').removeClass('alert-danger');
                    window.location.href = data.data.url;
                }else{
                    $('.return-msg span').text(data.msg);
                    $('.return-msg').css('display', 'block');
                }
            }
        })
        return false;
    }
})

